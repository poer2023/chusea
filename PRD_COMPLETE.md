# AI Writing Tool - å®Œæ•´äº§å“éœ€æ±‚æ–‡æ¡£ (PRD v1.0)

> åˆå¹¶PRDv2.mdä¸UIstyle.mdï¼Œè¡¥å……æŠ€æœ¯å®ç°ç»†èŠ‚

## ğŸ“– ç›®å½•
1. [äº§å“æ„¿æ™¯](#1-äº§å“æ„¿æ™¯)
2. [ç›®æ ‡ç”¨æˆ·](#2-ç›®æ ‡ç”¨æˆ·)
3. [æ ¸å¿ƒéœ€æ±‚](#3-æ ¸å¿ƒéœ€æ±‚)
4. [åŠŸèƒ½æ¶æ„](#4-åŠŸèƒ½æ¶æ„)
5. [å¾ªç¯å¼•æ“è¯¦è¿°](#5-å¾ªç¯å¼•æ“è¯¦è¿°)
6. [ç”¨æˆ·ç•Œé¢è§„èŒƒ](#6-ç”¨æˆ·ç•Œé¢è§„èŒƒ)
7. [æŠ€æœ¯æ¶æ„](#7-æŠ€æœ¯æ¶æ„)
8. [å®ç°è·¯çº¿å›¾](#8-å®ç°è·¯çº¿å›¾)

---

## 1. äº§å“æ„¿æ™¯

**æ‰“é€ ä¸€æ¬¾ã€Œä¸€æ¡æŒ‡ä»¤å³å¯æŒç»­ç”Ÿæˆä¸è‡ªæˆ‘å®¡æ ¡ã€çš„ AI å†™ä½œå·¥å…·**

### 1.1 æ ¸å¿ƒä»·å€¼ä¸»å¼ 
- **æœ€å°‘æ‰‹åŠ¨æ“ä½œ**: ä¸€æ¬¡æ€§å¯åŠ¨åè‡ªåŠ¨å®Œæˆå†™ä½œå…¨æµç¨‹
- **è´¨é‡ä¿éšœ**: å¾ªç¯è‡ªæ£€ç›´åˆ°è¾¾åˆ°å¯è¯»æ€§â‰¥70çš„æ ‡å‡†
- **é€æ˜å¯æ§**: å®Œæ•´ç‰ˆæœ¬æ ‘ï¼Œæ¯ä¸€æ­¥å¯è§†åŒ–å’Œå¯å›æ»š
- **ä¸“ä¸šå¼•ç”¨**: å®æ—¶æ ¡éªŒå¼•ç”¨çœŸä¼ªï¼Œæ”¯æŒå¤šç§æ ¼å¼

### 1.2 äº§å“å®šä½
- **ç±»å‹**: ä¸ªäººå‘ AI é•¿æ–‡åˆ›ä½œå·¥ä½œå°
- **å¹³å°**: PWA é¦–å‘ï¼ŒDesktopä¼˜å…ˆ
- **åœºæ™¯**: 2000å­—+é•¿æ–‡ï¼Œå­¦æœ¯ä¸åˆ›ä½œåŒæ¨¡å¼

---

## 2. ç›®æ ‡ç”¨æˆ·

### 2.1 ç”¨æˆ·ç”»åƒ

| ç”¨æˆ·ç±»å‹ | å…¸å‹åœºæ™¯ | ç—›ç‚¹ | è§£å†³æ–¹æ¡ˆ |
|---------|----------|------|----------|
| çŸ¥è¯†å‹åšä¸» | æ—¥æ›´åšå®¢/ä¸“æ  | æ„æ€è€—æ—¶ï¼Œæ’ç‰ˆç¹çï¼Œèµ„æ–™æœç´¢åˆ†å¿ƒ | ä¸€é”®ç”Ÿæˆ+è‡ªåŠ¨æ ¡éªŒ |
| ç ”ç©¶ç”Ÿ/å­¦è€… | æ’°å†™ç»¼è¿°ã€è®ºæ–‡è‰ç¨¿ | å¼•ç”¨æ ¼å¼å¤æ‚ï¼Œä¿®æ”¹è½®æ¬¡å¤šï¼ŒæŸ¥é‡å‹åŠ› | å¼•ç”¨æ ¡éªŒ+ç‰ˆæœ¬ç®¡ç† |
| äº§å“ç»ç† | å†™PRDã€éœ€æ±‚æ–‡æ¡£ | ç»“æ„åŒ–è¾“å‡º&å¿«é€Ÿè¿­ä»£ | æµç¨‹æ¨¡æ¿+æ‰¹é‡ä¿®æ”¹ |

### 2.2 ç”¨æˆ·æ—…ç¨‹

1. **Landing**: é€‰æ‹©ç©ºç™½/æ¨¡æ¿ â†’ è¾“å…¥ä¸»é¢˜æˆ–ç‚¹Promptå»ºè®®
2. **Draft Seed**: AIç”Ÿæˆå¤§çº²&æ®µè½éª¨æ¶ï¼›æµç¨‹æ¡å‡ºç°Plan&DraftèŠ‚ç‚¹
3. **å¾ªç¯å†™ä½œ**: è‡ªåŠ¨è‡ªæ£€å¾ªç¯ï¼›ç”¨æˆ·å¯éšæ—¶æ’å…¥Promptæˆ–æ‰‹åŠ¨ç¼–è¾‘
4. **Review Mode**: é¡¶éƒ¨åˆ‡æ¢ï¼›æ°”æ³¡æ ‡è®°é”™è¯¯ï¼›ä¸€é”®ä¿®å¤
5. **Export/Publish**: é€‰æ‹©æ ¼å¼æˆ–åŒæ­¥åˆ°é›†æˆ(Notionã€ArXiv)

---

## 3. æ ¸å¿ƒéœ€æ±‚

### 3.1 åŠŸèƒ½éœ€æ±‚ä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | åŠŸèƒ½ | æè¿° | MVP |
|-------|------|------|-----|
| P0 | å¾ªç¯ç”Ÿæˆå¼•æ“ | Planâ†’Draftâ†’Citationâ†’Grammarâ†’Readability | âœ… |
| P0 | æµç¨‹æ¡2.0 | èŠ‚ç‚¹å¯è§†åŒ–ã€å›æ»šã€çŠ¶æ€ç®¡ç† | âœ… |
| P0 | å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ | ç°å±‚é¢„è§ˆã€é€‰åŒºå·¥å…·æ¡ | âœ… |
| P1 | å¼•ç”¨æ ¡éªŒ | DOI/PMIDéªŒè¯ã€æ ¼å¼åŒ– | âœ… |
| P1 | å¯è¯»æ€§æ£€æµ‹ | Flesch-Kincaidâ‰¥70é˜ˆå€¼ | âœ… |
| P2 | PWAç¦»çº¿ | Service Workerç¼“å­˜ | âŒ |
| P2 | æ’ä»¶ç³»ç»Ÿ | ç¬¬ä¸‰æ–¹æ‰©å±• | âŒ |

### 3.2 éåŠŸèƒ½éœ€æ±‚

| ç»´åº¦ | éœ€æ±‚ | æŒ‡æ ‡ |
|------|------|------|
| æ€§èƒ½ | äº¤äº’å»¶è¿Ÿ | â‰¤150ms |
| æ€§èƒ½ | ç”Ÿæˆé¦–å­— | â‰¤3s |
| ç¼“å­˜ | Rediså‘½ä¸­ç‡ | â‰¥95% |
| è´¨é‡ | å¯è¯»æ€§é€šè¿‡ç‡ | â‰¥95% |
| æ—¶æ•ˆ | 2000å­—å®Œç¨¿æ—¶é—´ | â‰¤30min |

---

## 4. åŠŸèƒ½æ¶æ„

### 4.1 æ ¸å¿ƒæ¨¡å—

```mermaid
graph TB
    A[ç”¨æˆ·è¾“å…¥] --> B[å¾ªç¯å¼•æ“]
    B --> C[Planè§„åˆ’]
    C --> D[Draftèµ·è‰]
    D --> E[Citationæ£€æŸ¥]
    E --> F[Grammaræ ¡éªŒ]
    F --> G[Readabilityæ£€æµ‹]
    G --> H{è´¨é‡è¾¾æ ‡?}
    H -->|å¦| D
    H -->|æ˜¯| I[å®Œæˆè¾“å‡º]
    
    J[æµç¨‹æ¡] --> B
    K[ç¼–è¾‘å™¨] --> B
    L[Chaté¢æ¿] --> B
```

### 4.2 æ•°æ®æ¨¡å‹

```typescript
// æ ¸å¿ƒæ•°æ®ç»“æ„
interface Document {
  id: string
  title: string
  content: string
  status: WorkflowStatus
  nodes: WorkflowNode[]
  metadata: DocumentMetadata
}

interface WorkflowNode {
  id: string
  type: "Plan" | "Draft" | "Citation" | "Grammar" | "Readability" | "UserEdit"
  status: "pending" | "running" | "pass" | "fail"
  content?: string
  metrics?: NodeMetrics
  timestamp: Date
  branch?: string
}

interface NodeMetrics {
  readabilityScore?: number
  grammarErrors?: number
  citationCount?: number
  tokenUsage?: number
  processingTime?: number
}
```

---

## 5. å¾ªç¯å¼•æ“è¯¦è¿°

### 5.1 å·¥ä½œæµçŠ¶æ€æœº

```typescript
enum WorkflowStatus {
  IDLE = "idle",
  PLANNING = "planning", 
  DRAFTING = "drafting",
  CITATION_CHECK = "citation_check",
  GRAMMAR_CHECK = "grammar_check", 
  READABILITY_CHECK = "readability_check",
  DONE = "done",
  FAILED = "failed"
}
```

### 5.2 å¾ªç¯é€»è¾‘

1. **Plané˜¶æ®µ**: 
   - åˆ†æç”¨æˆ·éœ€æ±‚ç”Ÿæˆå¤§çº²
   - è®¾å®šæ–‡ç« ç»“æ„å’Œç›®æ ‡å­—æ•°
   - ç”Ÿæˆå„æ®µè½ä¸»é¢˜å¥

2. **Drafté˜¶æ®µ**:
   - åŸºäºå¤§çº²é€æ®µç”Ÿæˆå†…å®¹
   - ä¿æŒé€»è¾‘è¿è´¯æ€§
   - è¾¾åˆ°ç›®æ ‡å­—æ•°è¦æ±‚

3. **Citationæ£€æŸ¥**:
   - è¯†åˆ«éœ€è¦å¼•ç”¨çš„è§‚ç‚¹
   - è°ƒç”¨CrossRef/PubMed APIéªŒè¯
   - æ’å…¥æ ‡å‡†æ ¼å¼å¼•ç”¨

4. **Grammaræ ¡éªŒ**:
   - è¯­æ³•é”™è¯¯æ£€æµ‹å’Œä¿®å¤
   - å¥å¼ä¼˜åŒ–å»ºè®®
   - æœ¯è¯­ä¸€è‡´æ€§æ£€æŸ¥

5. **Readabilityæ£€æµ‹**:
   - Flesch-Kincaidå…¬å¼è®¡ç®—
   - ç›®æ ‡â‰¥70åˆ†
   - æœªè¾¾æ ‡è‡ªåŠ¨å›åˆ°Drafté‡å†™

### 5.3 å¤±è´¥å›é€€ç­–ç•¥

```typescript
// å›é€€é…ç½®
const RETRY_CONFIG = {
  maxRetries: 3,
  timeout: 60000, // 60s
  backoffStrategy: "exponential"
}

// å›é€€é€»è¾‘
if (node.status === "fail") {
  if (node.retryCount < RETRY_CONFIG.maxRetries) {
    // è‡ªåŠ¨å›é€€åˆ°Drafté‡è¯•
    workflow.rollbackTo("drafting")
  } else {
    // è¯·æ±‚ç”¨æˆ·å¹²é¢„
    workflow.requestUserIntervention()
  }
}
```

---

## 6. ç”¨æˆ·ç•Œé¢è§„èŒƒ

### 6.1 å¸ƒå±€æ¶æ„ (Holy Grail)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TopBar (56px) - Logo | Title | Run/History/Export      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ProcessBar (48px, sticky) - èŠ‚ç‚¹æµç¨‹å¯è§†åŒ–               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                â”‚ ChatPanel (24%)     â”‚
â”‚ MainEditor (66%)               â”‚ â”œâ”€ Tabs: Prompt/Log â”‚
â”‚ â”œâ”€ å¯Œæ–‡æœ¬ç¼–è¾‘åŒº                   â”‚ â”œâ”€ æ¶ˆæ¯åˆ—è¡¨          â”‚
â”‚ â”œâ”€ ç°å±‚é¢„è§ˆ                      â”‚ â””â”€ è¾“å…¥æ¡†+å»ºè®®       â”‚
â”‚ â””â”€ æµ®åŠ¨å·¥å…·æ¡                     â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ç»„ä»¶è§„èŒƒ

#### TopBarç»„ä»¶
```typescript
interface TopBarProps {
  title: string
  isAutoRunning: boolean
  onTitleChange: (title: string) => void
  onToggleAutoRun: () => void
  onOpenHistory: () => void
  onExport: () => void
}
```

#### ProcessBarç»„ä»¶
```typescript
interface ProcessBarProps {
  nodes: WorkflowNode[]
  currentNode?: string
  onNodeClick: (nodeId: string) => void
  onNodeRollback: (nodeId: string) => void
}
```

#### MainEditorç»„ä»¶
```typescript
interface MainEditorProps {
  content: string
  previewContent?: string
  isPreviewMode: boolean
  selectedText?: string
  onContentChange: (content: string) => void
  onTextSelect: (text: string, range: Range) => void
  onConfirmPreview: () => void
  onRejectPreview: () => void
}
```

### 6.3 å“åº”å¼è®¾è®¡

| å±å¹•å°ºå¯¸ | å¸ƒå±€ç­–ç•¥ | Chaté¢æ¿ | å·¥å…·æ¡ |
|---------|----------|----------|--------|
| Desktop â‰¥768px | ä¸‰æ å¸ƒå±€ | å›ºå®šå³ä¾§ | æµ®åŠ¨è¦†ç›– |
| Tablet 560-767px | æ­£æ–‡+æŠ˜å Chat | æŠ½å±‰å¼ | Iconæ¨¡å¼ |
| Mobile <560px | å…¨å±æ­£æ–‡ | FABåœ†é’® | çºµå‘æ’åˆ— |

### 6.4 åŠ¨æ•ˆè§„èŒƒ

| äº¤äº’åœºæ™¯ | åŠ¨æ•ˆç±»å‹ | å‚æ•° |
|---------|----------|------|
| èŠ‚ç‚¹çŠ¶æ€å˜åŒ– | scaleY + é¢œè‰²è¿‡æ¸¡ | 200ms ease-out |
| å†…å®¹å†™å…¥ | æ·¡å…¥ + èƒŒæ™¯é—ªçƒ | 600ms #fdf7e3 |
| å·¥å…·æ¡æ˜¾ç¤º | scaleå¼¹å…¥ | 0.9â†’1.0, 150ms |
| ç°å±‚é¢„è§ˆ | è¦†ç›–æ¸ç° | opacity 0â†’0.8 |

---

## 7. æŠ€æœ¯æ¶æ„

### 7.1 å‰ç«¯æ¶æ„

```typescript
// æŠ€æœ¯æ ˆé€‰æ‹©
const FRONTEND_STACK = {
  framework: "Next.js 14 (App Router)",
  stateManagement: "Zustand + XState",
  communication: "tRPC",
  styling: "Tailwind CSS",
  textEditor: "TipTap",
  animation: "Framer Motion",
  offline: "Service Worker + IndexedDB"
}
```

### 7.2 åç«¯æ¶æ„

```typescript
// åç«¯æŠ€æœ¯æ ˆ
const BACKEND_STACK = {
  framework: "FastAPI",
  database: "PostgreSQL + Redis",
  queue: "Redis Queue",
  ai: "Anthropic Claude + Local Models",
  cache: "Redis LRU (256MB)",
  search: "Elasticsearch (å¯é€‰)",
  deployment: "Docker + K8s"
}
```

### 7.3 æ ¸å¿ƒAPIè®¾è®¡

```typescript
// å¾ªç¯å¼•æ“API
interface LoopEngineAPI {
  // å¯åŠ¨å¾ªç¯
  POST /api/loop/start
  body: { documentId: string, config: LoopConfig }
  
  // è·å–çŠ¶æ€
  GET /api/loop/{documentId}/status
  
  // æ‰‹åŠ¨å¹²é¢„
  POST /api/loop/{documentId}/intervene
  body: { action: "retry" | "skip" | "rollback", nodeId?: string }
  
  // åœæ­¢å¾ªç¯
  POST /api/loop/{documentId}/stop
}

// èŠ‚ç‚¹ç®¡ç†API
interface NodeAPI {
  // è·å–èŠ‚ç‚¹è¯¦æƒ…
  GET /api/nodes/{nodeId}
  
  // å›æ»šåˆ°æŒ‡å®šèŠ‚ç‚¹
  POST /api/nodes/{nodeId}/rollback
  
  // è·å–èŠ‚ç‚¹å†å²
  GET /api/nodes/{documentId}/history
}

// å¼•ç”¨æ ¡éªŒAPI
interface CitationAPI {
  // éªŒè¯DOI
  POST /api/citations/validate
  body: { doi: string }
  
  // æ ¼å¼åŒ–å¼•ç”¨
  POST /api/citations/format  
  body: { citation: Citation, style: "GB/T" | "APA" | "MLA" }
  
  // æ‰¹é‡æ ¡éªŒ
  POST /api/citations/batch-validate
  body: { citations: Citation[] }
}
```

### 7.4 ç¼“å­˜ç­–ç•¥

```typescript
// Redisç¼“å­˜é…ç½®
const CACHE_CONFIG = {
  citationCache: {
    keyPattern: "cite:{doi|pmid}",
    ttl: 7 * 24 * 3600, // 7å¤©
    maxSize: "128MB"
  },
  documentCache: {
    keyPattern: "doc:{id}:version:{version}",
    ttl: 24 * 3600, // 1å¤©
    maxSize: "64MB"
  },
  metricsCache: {
    keyPattern: "metrics:{type}:{date}",
    ttl: 3600, // 1å°æ—¶
    maxSize: "32MB"
  }
}
```

---

## 8. å®ç°è·¯çº¿å›¾

### 8.1 é‡Œç¨‹ç¢‘è§„åˆ’

| é‡Œç¨‹ç¢‘ | ç›®æ ‡ | åŠŸèƒ½èŒƒå›´ | æ—¶é—´ |
|-------|------|----------|------|
| **M0 æ¶æ„é‡æ„** | å»ºç«‹æ–°æŠ€æœ¯æ ˆ | Next.js+FastAPI+RedisåŸºç¡€æ¶æ„ | 2å‘¨ |
| **M1 å¾ªç¯å¼•æ“** | æ ¸å¿ƒæµç¨‹MVP | Planâ†’Draftâ†’Grammarâ†’Readability | 3å‘¨ |
| **M2 UIé‡æ„** | æ–°ç•Œé¢å®ç° | Holy Grailå¸ƒå±€+æµç¨‹æ¡+ç¼–è¾‘å™¨ | 3å‘¨ |
| **M3 å¼•ç”¨ç³»ç»Ÿ** | å­¦æœ¯åŠŸèƒ½ | DOIæ ¡éªŒ+æ ¼å¼åŒ–+ç¼“å­˜ | 2å‘¨ |
| **M4 ä¼˜åŒ–å®Œå–„** | æ€§èƒ½è°ƒä¼˜ | PWA+ç¦»çº¿+ç›‘æ§ | 2å‘¨ |

### 8.2 è¯¦ç»†ä»»åŠ¡åˆ†è§£

#### M0: æ¶æ„é‡æ„ (2å‘¨)
- [ ] ç¯å¢ƒæ­å»º: Next.js + FastAPIæ–°é¡¹ç›®
- [ ] æ•°æ®åº“è®¾è®¡: æ–°çš„schemaé€‚é…å·¥ä½œæµ
- [ ] Redisé›†æˆ: ç¼“å­˜å±‚å’Œé˜Ÿåˆ—ç³»ç»Ÿ
- [ ] åŸºç¡€API: æ–‡æ¡£CRUD + çŠ¶æ€ç®¡ç†
- [ ] å‰ç«¯è·¯ç”±: App Router + çŠ¶æ€ç®¡ç†

#### M1: å¾ªç¯å¼•æ“ (3å‘¨)
- [ ] çŠ¶æ€æœºå®ç°: XStateå·¥ä½œæµå®šä¹‰
- [ ] åç«¯å¼•æ“: å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—å¤„ç†
- [ ] AIé›†æˆ: Claude API + æœ¬åœ°æ¨¡å‹
- [ ] è´¨é‡æ£€æµ‹: è¯­æ³•æ£€æŸ¥ + å¯è¯»æ€§ç®—æ³•
- [ ] å›é€€æœºåˆ¶: å¤±è´¥é‡è¯• + ç”¨æˆ·å¹²é¢„

#### M2: UIé‡æ„ (3å‘¨)
- [ ] å¸ƒå±€æ¡†æ¶: Holy Grailå“åº”å¼å¸ƒå±€
- [ ] ProcessBar: èŠ‚ç‚¹å¯è§†åŒ–ç»„ä»¶
- [ ] MainEditor: TipTapå¯Œæ–‡æœ¬ç¼–è¾‘å™¨
- [ ] ChatPanel: å®æ—¶äº¤äº’é¢æ¿
- [ ] FloatingToolbar: ä¸Šä¸‹æ–‡å·¥å…·æ¡

#### M3: å¼•ç”¨ç³»ç»Ÿ (2å‘¨)
- [ ] DOIéªŒè¯: CrossRef APIé›†æˆ
- [ ] æ ¼å¼åŒ–å¼•æ“: å¤šæ ¼å¼å¼•ç”¨ç”Ÿæˆ
- [ ] ç¼“å­˜ä¼˜åŒ–: Redis LRUç­–ç•¥
- [ ] æ‰¹é‡å¤„ç†: å¼‚æ­¥æ ¡éªŒé˜Ÿåˆ—
- [ ] é”™è¯¯å¤„ç†: å¤±æ•ˆå¼•ç”¨æ ‡è®°

#### M4: ä¼˜åŒ–å®Œå–„ (2å‘¨)
- [ ] PWAé…ç½®: Service Worker + Manifest
- [ ] ç¦»çº¿ç¼“å­˜: IndexedDB + åŒæ­¥ç­–ç•¥
- [ ] æ€§èƒ½ç›‘æ§: æŒ‡æ ‡æ”¶é›† + å‘Šè­¦
- [ ] ç”¨æˆ·æµ‹è¯•: Betaç‰ˆæœ¬å‘å¸ƒ
- [ ] æ–‡æ¡£å®Œå–„: ç”¨æˆ·æ‰‹å†Œ + APIæ–‡æ¡£

### 8.3 é£é™©è¯„ä¼°ä¸ç¼“è§£

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£ç­–ç•¥ |
|------|------|------|----------|
| APIè´¹ç”¨è¶…æ”¯ | é«˜ | é«˜ | Tokené¢„ä¼°+é™æµ+åˆ†å±‚è°ƒç”¨ |
| å¾ªç¯æ­»é” | ä¸­ | é«˜ | è¶…æ—¶æœºåˆ¶+è¿­ä»£ä¸Šé™+Watchdog |
| å¼•ç”¨å‡†ç¡®ç‡ | ä¸­ | ä¸­ | åŒæ¨¡å‹éªŒè¯+äººå·¥æ ¡å¯¹æç¤º |
| æ€§èƒ½ç“¶é¢ˆ | ä¸­ | ä¸­ | ç¼“å­˜ä¼˜åŒ–+å¼‚æ­¥å¤„ç†+è´Ÿè½½å‡è¡¡ |
| ç”¨æˆ·ä½“éªŒ | ä½ | é«˜ | å¿«é€ŸåŸå‹+ç”¨æˆ·æµ‹è¯•+è¿­ä»£ä¼˜åŒ– |

---

## 9. æˆåŠŸæŒ‡æ ‡

### 9.1 äº§å“KPI

| æŒ‡æ ‡ç±»å‹ | å…·ä½“æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹æ³• |
|---------|----------|--------|----------|
| æ•ˆç‡ | 2000å­—å®Œç¨¿æ—¶é—´ | â‰¤30min | ç”¨æˆ·è¡Œä¸ºç»Ÿè®¡ |
| è´¨é‡ | å¯è¯»æ€§é€šè¿‡ç‡ | â‰¥95% | è‡ªåŠ¨æ£€æµ‹ç»Ÿè®¡ |
| ç•™å­˜ | æ¬¡æ—¥ç•™å­˜ç‡ | â‰¥40% | ç”¨æˆ·åˆ†æ |
| æ»¡æ„åº¦ | NPSè¯„åˆ† | â‰¥50 | ç”¨æˆ·è°ƒç ” |

### 9.2 æŠ€æœ¯æŒ‡æ ‡

| æŒ‡æ ‡ç±»å‹ | å…·ä½“æŒ‡æ ‡ | ç›®æ ‡å€¼ | ç›‘æ§æ–¹æ³• |
|---------|----------|--------|----------|
| æ€§èƒ½ | APIå“åº”æ—¶é—´ | â‰¤150ms | APMç›‘æ§ |
| ç¨³å®šæ€§ | ç³»ç»Ÿå¯ç”¨æ€§ | â‰¥99.9% | å¥åº·æ£€æŸ¥ |
| ç¼“å­˜ | Rediså‘½ä¸­ç‡ | â‰¥95% | Redisç›‘æ§ |
| æˆæœ¬ | AI APIæˆæœ¬ | <$0.1/åƒå­— | æˆæœ¬ç»Ÿè®¡ |

---

## é™„å½•

### A. æŠ€æœ¯é€‰å‹å¯¹æ¯”

| ç»´åº¦ | å½“å‰æ–¹æ¡ˆ | æ–°æ–¹æ¡ˆ | é€‰æ‹©ç†ç”± |
|------|----------|--------|----------|
| å‰ç«¯æ¡†æ¶ | React + Vite | Next.js 14 | SSR+PWA+æ›´å¥½çš„SEO |
| çŠ¶æ€ç®¡ç† | Context | Zustand+XState | æ›´å¥½çš„çŠ¶æ€æœºæ”¯æŒ |
| æ–‡æœ¬ç¼–è¾‘ | æ—  | TipTap | ä¸°å¯Œçš„ç¼–è¾‘åŠŸèƒ½ |
| ç¼“å­˜å±‚ | æ—  | Redis | é«˜æ€§èƒ½å¼•ç”¨ç¼“å­˜ |
| éƒ¨ç½²æ–¹å¼ | åˆ†ç¦»éƒ¨ç½² | å•ä½“PWA | æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ |

### B. æ•°æ®è¿ç§»æ–¹æ¡ˆ

```sql
-- ç°æœ‰æ•°æ®åˆ°æ–°schemaçš„è¿ç§»è„šæœ¬
-- 1. æ–‡æ¡£æ•°æ®è¿ç§»
INSERT INTO new_documents (id, title, content, created_at)
SELECT id, title, content, created_at FROM old_documents;

-- 2. ç”¨æˆ·æ•°æ®è¿ç§»  
INSERT INTO new_users (id, username, email, created_at)
SELECT id, username, email, created_at FROM old_users;

-- 3. åˆ›å»ºé»˜è®¤å·¥ä½œæµèŠ‚ç‚¹
INSERT INTO workflow_nodes (document_id, type, status, content)
SELECT id, 'UserEdit', 'pass', content FROM new_documents;
```

### C. å¼€å‘ç¯å¢ƒé…ç½®

```bash
# å‰ç«¯å¼€å‘ç¯å¢ƒ
cd frontend
npm install
npm run dev

# åç«¯å¼€å‘ç¯å¢ƒ  
cd backend
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
uvicorn main:app --reload

# Rediså¯åŠ¨
redis-server --maxmemory 256mb --maxmemory-policy allkeys-lru
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-07-10  
**è´Ÿè´£äºº**: äº§å“å›¢é˜Ÿ  
**å®¡æ ¸çŠ¶æ€**: å¾…å®¡æ ¸